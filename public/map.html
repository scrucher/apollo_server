<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css' rel='stylesheet' />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>
<body>
    <style>
        #map { height: 500px; }
    </style>

    <div id="map"></div>
    <script>
        let lat;
            let lon;

                navigator.geolocation.getCurrentPosition(position => {
                    lat = position.coords.latitude;
                    lon = position.coords.longitude;
                    console.log(lat, lon);
                    document.getElementById('latitude').textContent = lat;
                    document.getElementById('longitude').textContent = lon;

                    const mymap = L.map('mymap').setView([lat, lon], 15);
                    const attribution =
                        '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';
                    const tileUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
                    const tiles = L.tileLayer(tileUrl, { attribution });
                    tiles.addTo(mymap);
                    const marker = L.marker([lat, lon]).addTo(mymap);
                });


            var map = L.map('map').setView([lat, lon], 13);

                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);

                L.marker([lat, lon]).addTo(map)
                    .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
                    .openPopup();


            // MAP BOX SCRIPT

            // mapboxgl.accessToken = 'pk.eyJ1Ijoic2NydWNoZXIiLCJhIjoiY2t3dW5tYnNlMXM1MTJxdXMwb3BlZWJmYiJ9.2iqhSE1FU68zhi4MgrsFwg';
            // var map = new mapboxgl.Map({
            //     container: 'map',
            //     // center: [-122.486052, 37.830348],
            //     style: 'mapbox://styles/mapbox/streets-v11'
            // });

            // map.on('load', () => {
            //     map.addSource('route', {
            //         'type': 'geojson',
            //         'data': {
            //             'type': 'Feature',
            //             'properties': {},
            //             'geometry': {
            //                 'type': 'LineString',
            //                 'coordinates': [lat, lon]
            //             }
            //         }
            //     });
            //     map.addLayer({
            //         'id': 'route',
            //         'type': 'line',
            //         'source': 'route',
            //         'layout': {
            //             'line-join': 'round',
            //             'line-cap': 'round'
            //         },
            //         'paint': {
            //             'line-color': '#888',
            //             'line-width': 8
            //         }
            //     });
            // });
    </script>
 
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
            <!-- <script src="./map.js"></script> -->
    
</body>
</html>